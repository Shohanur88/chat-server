(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{108:function(e,t){},111:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(8),r=a.n(o),c=(a(66),a(13)),i=a(10),l=(a(67),a(34),a(20),a(68),a(6)),m=a(14),p=a(15),u=a(17),d=a(16),h=a(5),g=a(18),f=(a(73),a(23)),v=a.n(f),k=(s.a.createContext(),a(111),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).removeUser=function(e){a.props.socket.emit("remove_user",e.target.value)},a.userPaste=function(){a.props.socket.on("user_information",(function(e){var t=document.getElementById("user-field"),n=[],o=1;e.forEach((function(e){n.push(s.a.createElement("li",{key:o.toString()},s.a.createElement("span",{className:e.status}),s.a.createElement("span",{className:"member"},e.username)," ",s.a.createElement("span",null,s.a.createElement("button",{className:"float-right",onClick:a.removeUser,value:e.userid},"Delete")))),o++}));try{r.a.render(n,t)}catch(c){alert("Please Reload and Login Again!!!")}}))},a.onChange=function(e){a.setState(Object(l.a)({},e.target.name,e.target.value))},a.viewSingleMsg=function(e){var t=e.time.split("T");t[1]=new Date(e.time).toLocaleTimeString({},{timeZone:"UTC",hour12:!0,hour:"numeric",minute:"numeric"});var a=document.createElement("div");a.className="client-msg";var n=document.createElement("div");n.className="client-des";var s=document.createElement("span");s.className="client-name";var o=document.createElement("small");o.className="client-msg-time";var r=document.createElement("div");r.className="msg";var c=document.createTextNode(e.username),i=document.createTextNode(t[0]+","+t[1]),l=document.createTextNode(decodeURIComponent(e.message));r.appendChild(l),o.appendChild(i),s.appendChild(c),n.appendChild(s),n.appendChild(o),a.appendChild(n),a.appendChild(r),document.getElementById("view-msg").appendChild(a)},a.deleteMsg=function(e){e.preventDefault(),a.props.socket.emit("delete_Msg","delete"),a.props.history.push("/")},a.Logout=function(e){e.preventDefault(),a.props.socket.emit("logout",!0),a.props.history.push("/"),window.location.reload()},a.addMember=function(e){e.preventDefault(),a.props.history.push("/register")},a.onClick=function(e){e.preventDefault();var t=(new Date).toISOString(),n={uid:"",username:a.state.username,time:t,message:encodeURIComponent(a.state.input_msg)};a.state.msg.push({username:a.state.username,time:t,message:a.state.input_msg}),""===a.state.input_msg?alert("Can not send empty Msg!!"):(a.props.socket.emit("insert_msg",n),a.setState({input_msg:""}))},a.state={input_msg:"",msg:[],userinfo:[],role:"",username:""},a.props.socket.off("delete_Msg"),a.props.socket.off("login"),a.props.socket.off("event-insert_msg"),a.props.socket.off("remove_user_back"),a.props.socket.off("broadcast_msg"),a.props.socket.off("msg_fetch_from_initial"),a.props.socket.off("user_information"),a.props.socket.off("stay_logged"),a.props.socket.off("check_login"),a.props.socket.off("insert_msg"),a.onChange=a.onChange.bind(Object(h.a)(a)),a.onClick=a.onClick.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"viewMsg",value:function(e,t){var a=t.time.split("T");return a[1]=new Date(t.time).toLocaleTimeString({},{timeZone:"UTC",hour12:!0,hour:"numeric",minute:"numeric"}),s.a.createElement("div",{key:e.toString(),className:"client-msg"},s.a.createElement("div",{className:"client-des"},s.a.createElement("span",{className:"client-name"},t.username),s.a.createElement("small",{className:"client-msg-time"},a[0]+","+a[1])," :"),s.a.createElement("div",{className:"msg"},t.message))}},{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("stay_logged",(function(t){!1===t&&e.props.history.push("/")})),this.props.socket.emit("stay_logged","k"),this.props.socket.on("check_login",(function(t){try{e.setState({role:t.role}),e.setState({username:t.username});var a=document.getElementById("uname");r.a.render("Username :"+t.username,a),2===t.role&&(a=document.getElementById("showuser"),r.a.render(" ",a),a=document.getElementById("addmem"),r.a.render(" ",a),a=document.getElementById("delete_msg"),r.a.render(" ",a))}catch(n){window.location.reload()}})),this.props.socket.emit("check_login",!0),this.props.socket.emit("page_chatroom","chatroom"),this.props.socket.on("msg_fetch_from_initial",(function(t){var a=[],n=document.getElementById("view-msg"),s=1;t.forEach((function(t){t.message=decodeURIComponent(t.message),e.state.msg.push(t),a.push(e.viewMsg(s,t)),s++})),r.a.render(a,n),n.scrollTop=n.scrollHeight})),this.props.socket.on("broadcast_msg",(function(t){var a=document.getElementById("view-msg");e.state.msg.push(t),t.message=decodeURIComponent(t.message),e.viewSingleMsg(t),a.scrollTop=a.scrollHeight})),this.props.socket.on("remove_user_back",(function(e){alert(e)})),this.userPaste(),this.props.socket.on("insert_msg",(function(t,a){if(!0===t){e.viewSingleMsg(a);var n=document.getElementById("view-msg");n.scrollTop=n.scrollHeight}}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container all-body"},s.a.createElement("div",{className:"row top"},s.a.createElement("div",{className:"col-md-6 heading"},s.a.createElement("h4",{id:"head"},"Chatroom")),s.a.createElement("div",{className:"col-md-6 control text-right"},s.a.createElement("span",{id:"uname",className:"control-single"},"Username: Unknown "),"|",s.a.createElement("span",{id:"addmem",className:"control-single"},s.a.createElement("button",{className:"top-link",onClick:this.addMember}," Add Member |")),s.a.createElement("span",{id:"delete_msg",className:"control-single"},s.a.createElement("button",{onClick:this.deleteMsg,className:"top-link"},"Delete Message |")),s.a.createElement("span",{className:"control-single"},s.a.createElement("button",{onClick:this.Logout,className:"top-link"},"Logout")),"|")),s.a.createElement("div",{className:"row"},s.a.createElement("div",{id:"showuser",className:"col-md-3 users"},s.a.createElement("p",null,"Members:"),s.a.createElement("ul",{id:"user-field",className:"users-ul"})),s.a.createElement("div",{className:"col-md-9 chat"},s.a.createElement("div",{id:"view-msg",className:"chat-area"}),s.a.createElement("div",{className:"input-field"},s.a.createElement("textarea",{name:"input_msg",value:this.state.input_msg,onChange:this.onChange,placeholder:"Input msg here.."}),s.a.createElement("div",{className:"send-button text-center"},s.a.createElement("button",{type:"button",className:"send-btn",onClick:this.onClick},"Send"))))))}}]),t}(n.Component)),E=(a(112),a(129),function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",key:"",msg:[]};try{a.props.socket.off("login"),a.props.socket.off("back_to_room")}catch(n){}return a.props.socket.on("back_to_room",(function(e){!0===e&&a.props.history.push("/chat")})),a.props.socket.emit("back_to_room","loginPage"),a.props.socket.on("login",(function(e){!0===e?a.props.history.push("/chat"):alert("Wrong Username or Password!!")})),a.onChange=a.onChange.bind(Object(h.a)(a)),a.onSubmit=a.onSubmit.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"onChange",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();this.state.username,this.state.password;this.props.socket.emit("login",this.state),this.setState({username:"",password:"",key:"",msg:[]})}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("p",null,this.state.username),s.a.createElement("div",{className:"row"},s.a.createElement("h2",{className:"heading text-center w-100 p-3"},"Login")),s.a.createElement("div",{className:"row text-center"},s.a.createElement("form",{className:"col-centered",id:"main-login",action:this.props.action,method:this.props.method,onSubmit:this.onSubmit},s.a.createElement("div",{className:"register"},s.a.createElement("input",{name:"username",value:this.state.username,placeholder:"User Name",className:"",type:"text",onChange:this.onChange})),s.a.createElement("div",{className:"register"},s.a.createElement("input",{name:"password",value:this.state.password,placeholder:"Password",className:"",type:"password",onChange:this.onChange})),s.a.createElement("div",{className:"register"},s.a.createElement("input",{name:"key",value:this.state.key,placeholder:"Encryption Key",className:"",type:"text",onChange:this.onChange})),s.a.createElement("button",{type:"submit",className:"register-btn",onSubmit:this.loginServer},"Login"))))}}]),t}(n.Component));E.defaultProps={action:"http://localhost:5000/login",method:"post"};var b=E,N=(a(130),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).goHome=function(e){e.preventDefault(),a.props.history.push("/chat"),a.props.socket.emit("goHome","back")},a.onClick=function(e){e.preventDefault();""===a.state.fname||""===a.state.username||""===a.state.password||""===a.state.role?alert("Fill All the Iput"):(a.props.socket.emit("register",a.state),a.setState({fname:"",username:"",password:"",role:"",msg:[]}))},a.state={fname:"",username:"",password:"",role:"",msg:[]},a.props.socket.off("stay_logged"),a.props.socket.off("register"),a.props.socket.on("stay_logged",(function(e){!1===e&&a.props.history.push("/")})),a.props.socket.emit("stay_logged","k"),a.onChange=a.onChange.bind(Object(h.a)(a)),a.onClick=a.onClick.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.socket.on("register",(function(e){!0===e?alert("Member Added Successfully!!!"):"exist"===e?alert("User Name Already Taken!!"):alert("Member Not Added !! There are a Problem!!")}))}},{key:"onChange",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e;return s.a.createElement("div",{className:"container"},s.a.createElement("p",null,this.state.role),s.a.createElement("div",{className:"row"},s.a.createElement("h2",{className:"heading text-center w-100 p-3"},"Register")),s.a.createElement("div",{className:"row text-center"},s.a.createElement("form",{className:"col-centered",id:"main-login",action:this.props.action,method:this.props.method,onSubmit:this.onSubmit},s.a.createElement("div",{className:" register"},s.a.createElement("input",{name:"fname",value:this.state.fname,placeholder:"Full Name",className:"",type:"text",onChange:this.onChange})),s.a.createElement("div",{className:" register"},s.a.createElement("input",{name:"username",value:this.state.username,placeholder:"User Name",className:"",type:"text",onChange:this.onChange})),s.a.createElement("div",{className:" register"},s.a.createElement("input",{name:"password",value:this.state.password,placeholder:"Password",className:"",type:"password",onChange:this.onChange})),s.a.createElement("div",{className:" register"},s.a.createElement("select",(e={name:"role"},Object(l.a)(e,"name","role"),Object(l.a)(e,"value",this.state.role),Object(l.a)(e,"id","inputState"),Object(l.a)(e,"onChange",this.onChange),e),s.a.createElement("option",{selected:!0},"Role...."),s.a.createElement("option",{value:"2"},"Member"),s.a.createElement("option",{value:"1"},"Admin"))),s.a.createElement("button",{className:"register-btn",onClick:this.onClick},"Register"),s.a.createElement("button",{onClick:this.goHome,className:"home-link"},"Goto Room"))))}}]),t}(n.Component));N.defaultProps={action:"http://localhost:5000/login",method:"post"};var C=N,y=v.a.connect("localhost:5000"),_=function(e){return s.a.createElement(c.a,null,s.a.createElement(i.a,{path:"/chat",exact:!0,component:function(e){return s.a.createElement(k,Object.assign({socket:y},e))}}),s.a.createElement(i.a,{path:"/",exact:!0,component:function(e){return s.a.createElement(b,Object.assign({socket:y},e))}}),s.a.createElement(i.a,{path:"/register",exact:!0,component:function(e){return s.a.createElement(C,Object.assign({socket:y},e))}}))};r.a.render(s.a.createElement(_,null),document.querySelector("#root"))},61:function(e,t,a){e.exports=a(131)},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.23560971.chunk.js.map